# # Check out https://docs.codemagic.io/getting-started/building-a-native-ios-app/ for more information
# # Please review and update values in curly braces

workflows:
    ios-app:
        name: iOS App
        environment:
            vars:
                XCODE_WORKSPACE: "ahorta.xcworkspace"  # PUT YOUR WORKSPACE NAME HERE
                XCODE_SCHEME: "ahorta" # PUT THE NAME OF YOUR SCHEME HERE
                APP_STORE_CONNECT_ISSUER_ID: "Encrypted(Z0FBQUFBQmdMWUtmUmxHVVg1VFM4WFdycEw2V1ZlcmhMeG1Yb0FaaE1WZVczRWs2aU9KZU96VU00REZRWTJqV1k4enBHX0RnNDlBTHJ6bkRlV0ZTNGlnUE43X2dibmlmSDNBWnJRSUFGVXNJQWR6TUxsZWlZMElWdElralpwMmIwX0hhYjQwU3lwRjg=)"
                APP_STORE_CONNECT_KEY_IDENTIFIER: "Encrypted(Z0FBQUFBQmdMWU1rSEZ3cjBXLTROYjRqWmVRNmR2ZW84eW52RlhyMWJFelM5bTNmai00TnhFcFVoSm9kbng2U1hNalhwV3JEcEdaZEZGZ0haeVFlUzRrNW5wUHF1MzZDY0E9PQ==)"
                APP_STORE_CONNECT_PRIVATE_KEY: "Encrypted(Z0FBQUFBQmdMb2NzYWk1UUh0cWRhVTdIakVSZ19kckNsTkpBdUJsbkFERVRvbEtoU3VKbmZiWFpyOHVtRGItdWFrSm1CVGxXdFRoUUdiUXpfMUFMSmFUeW45Z2hQNFBiREdqMEVNT2Npc3VWUGQ5M2FXVjlucV9oa294MjBOdDloUDNPNkR4YTNXWXIzSWpWTG9yb29veDlRSFh5UGpzcTZjRGtkMm9LSTIzOFVCYTFjUWFESTh2MmhOaDNtekp6R3FOSjdybmtqMWdpSjBaMTk1X045M0FEeThkZVF0UmtqSVJ4YmFBVnlMOWtJNmdwMmpKc0ZxWTZOcHQzdXU1SHBwd1c5Wnd2c2ZIM2NDcHBTZWZUUnRjRDlYR0psSkRfd0J5NmRkanZrakdkTDBDeEd4QzNCd2IxTnRISFZBdlNheUdHZHBUT2FJYk9ZZFFSYnNlZmNqMS1WUl9WbnFuV3k4bURqcjJ4YnUxb3k5R2MxOU9mNU1EMUV2TThwNzVlalE0Qk5IcnNTQnA1RktXa3AxTHhoRW5NRC1DUHNuUFpNNk9JNUltZ052MjQ5a3dzVFBOVEo1QT0=)"
                CERTIFICATE_PRIVATE_KEY: "Encrypted(Z0FBQUFBQmdMcEhBYzRZWkZLR2Y5aUlORGZtTXc2UjNzMldqTVEwbVNGbUxKWjJ4V25uTHItVWMzN1RKVndrRHg2SlJ6UElVOFozeHpmRmZoNE81d2RVeWNlT19rQVRPdUg4dU5fZnZsWkl0YW1od0piS3dVZzR5R2dUZTVnT0hwbGljMWZBSW0zLUdmMWJQaFh4THJvd21McG9WRHZrYVVkVEpETndfazUzSVhzcHZqYWZWMVJHQ2FiaktvR2tXVmtVSmxWbENpNVp1WlVFY19YMGtyUmdCenNua3FJUXp4dUZjOG55X0pKQWNDZGJnbXBSdlAtWUN3OEhsbjlwTFZLbDdZMHNqUnJNZHEyankwcExvNmtrOWZwRERvWlNzSldIOHR2SVdOY0tfVGRSbzlIMi1MSXV0b282TGNXYS10MVhsYTJyc0dqZk1OeFFMVDBSUmhmOFZWT2ZsdW5QaWpPT25ZT0hESGo2R3FvNk9wMWJENXJUM2tMOWptbTZJVlcyVnZGNW92aHpLaEVWLUJNQTBnb3B2Z1NuYVNWRVpCdjFjYUVqSnFBWW41YVg0ekdMdnpsa1V5eElsOFZJeTZrT1RBWG1PNWlGaHJGVWlLeVhkVkduMlM1UkdNcms4YXN0Zml6WlFlU3V0V2tWWk1DNG9OUFFhOGpEVWY5dk1FNGRXalVGcUNtdXg4ZW5fckNmOUNaVk1iNUVHd0d1R0dXQmJGc2drTTFwanFNY2lGaGM5YnNFbXhHY24yb3lwVWVpMFNxQ1VqcHk3YzN4Sko2XzBSRW8xMkhmN3RwWndHV3FqakdyWGR6cVVFYl9SN3lxaXNPaTB4MXgyeTNIV2thcXVtZVRoR1ZGZmZyREUyM2h0UUUwSEVaYzRkazlralhQU2xxaXJTVU92Z1REQTVLSGdzZVp2SVRvck1qM2hfa2xCZVBpMENZcmFtanJ5WFUtck9CZmJLaGMxOGpsMm9xb3dGTGNDb3MtNUFQclVMcGJVUHZOdDY2SndFaEZaU1dDU3RrLWRtWTVwaUhMdFR6VHdINWphZ2IycjZYLS00SkQtNEZNOU5rbG14TmhyS29DekpFN0QwTDR0U1Vwc2JKVkdvdUttbnBJaTA1ZllCdHFFaFUxbVh2ZFlwQVFmbU5fRGlqSWxBemlRMm1xODNUQkNIWFpKV2FOWEdrWk1MZTNPN3VzQ3FJa1Y3WDZKcUhqT0pRT2Q1SF9uTnhnS1FvUG5JSGNpWmoxTjZkNDhFR2RwSHZSdHJZakpJal8wNW5lUE9aeTNldERBVTlyS29tcHAzTlQ1aHJxd1BPWVEtbnMyRVNhVHB4OVJ5QkJvTjJzbVprQnhzb2QwdHc2RWRLN05INi1ERXlpcVFqc2RTeDdrMkFfMzVlQlM4UkdjejhWTEZWMUk3UzZjYmdaa2RXVFpRWXl5aUlzdFBlNzNDRW5uclgtd2dYS1BHd1kxU2NaOVdVbmZMUXBMSEF3ak5Fb0xBT3kwSktXeWoxYWpVZ3RDSDNQdTdXQS1DOFJKd0ZGNTY4VjRQdExhZ19tWERlcUdBLVZEUDhJdEM3M1B2c1BDUXNKZW14Zms4Q01NSXp1cnpOdWx3TVJPbHBYTnY5V2c2R2FiOUgwcnJoczJKMzEySmVxaDlObG8taGY1ZWVQTFVIWXJxS2tUc09pRnRub2RibTdfY2JGZVNURUNqUWhWUVgtSnB4bm42Zk9nTl9ma1QzUkFsanJUZDBFazNEQ3FRVDVzR0prYVBSTVB0X1VudEVfR25acURfUkdieEVTSlhzZWFzZUxtVmNCREp2SW4xSXlocVJMazVfS2VUVnBWdEI3dVRPa1lsTlppb3hRdE5FMUJRYVZnQ3BCSVNPUzNpcWFDOXgxZUlfdkZLYmJHRkhkaXdKYUV4Qlh5UFh6SXN1V1pZY3lrbUVqdy05eWxVV2lNeS1rQUpqdGtlT2psWjFOemRBajk2aGRhX3pybHB5YnozVW50OWlRQl9JbmVVeWNaZmZkT09MOW9QNHNvSkZrTTJGb0FNMEZudi1DOEhMY2Jpa3hIcEszenVRbWZxTmZBZWF2Wjc2Z0t0elFwaU5kdTZ5QWxtU3M5N1JWQXNmNHF4dWVhV1FTRmwtY0w4RDNyY01OQmxkOGc4ZnAxaktrM3dXTkhNYXdnUUpheGE1OEZla2ZCTEs0SXFkY3EwSGpKUGJ1Y3FrWXJ3SmU2WUVQcW5ReWtBQlVsWHRhcEdnckhqZWVTQnlKQWxoYXJublE2cDQxWHdWOG8wZ2pBVVZGZzh3MWFSU25vYkVsbFdLVEZfSGVrVmRTcnlIek5vbTBfZi1wNGhiNGtQczZEYVg3Zjh2UGEzajVLNFFMMnRXWnN2YmI5VTctTDJhSC1LZS1Qc2I2VHpPZ3JoaFl0U2o5UHh0MnJfY3NqWHcxQlROYVJTM2cxZWV1QVV4bVd4OVQ2QUgxUl9GdEVha1NUcWVrYWtxa3h6UTRHNEVHeWRseW1NR2ZDYnJWcVEwOTVJMnJMS292Q0lUYWJ2R2FlNkt3d0hOTWt4bXIyanZKb2ZiYTF6MFdWcGx6Nms3S3hoZ1ZMeDZhMFR3RU5nemtWVG84SXYzSHE3UHQ5R0t0dWJyNi1vY09odHJESVJYTG10Um4xX0c3NGtYSmxKNEdzQm5jYzFJcFpoZGo2bFRDb0QzNlcyeUdTaktCRVN6Vi1DRHlLWFlPZXVZOXFHRTdLeVREWXAzVk1oZFRYMl9DRHpuRkZfQWw1M1NaY25PUVh4S2wzZTcxXzFZVkp4T3Bsdnl4M2cwdmNrWXl4N2I3WVJuUjhqSVIta3MxckZmYjVxZm5vS1ZMM1NaRXhFZUVVWC1xWl9wNlBtVUY0Y05BcUJ5U0xPQWdXNmZyS2NaeTNnMGFaX3h3eV9xNWU2VDM2WndGdVhublF0enhTelY0dVZmYzJrbTNoWXNmSHhMVFBkcDJhXzk3MkoxUWZSWkdMQWRyZ3plbm40YXFoY2JfTVRtNzlJMjMyOURRcExDZXNkbk1aVnA1QlVRejNiMW16aU1rZ0RNUTQ1SzNyQmtVdk9SYm5vWGVsMWJZLWg1QnEtTDREUnBLWWNEWTBwU0V0MzdIRk1wN3VpTl9pZ3A5SXdzdUNfNFZSbFYwelA5dExRY3VlemZfbjFUTHpyRWlPa2V1ajNua1FaLUVhMm1jSDZJLURQWWFYY0h1NmRVQ2tfN290ajFQeFluYW81d1FqQmRtWl9xbkdJY0NsME1XbzJxN3d1WHFuSHZ2ZkE3VkxTOEtpY3l1aUFWWmM4WFVvczZUV0QxaEhZZlg3WWduTEdFQ3cwN0h0T3dEQVlsSjktQWx5eURtNldjb0cwNEs0bVlCR2VLcmNRSllFRndwdlMwRWdGaWM3Y0ZPYWxBWFF1QjhDbTVHYXVkNE00OC1heGhfV0FHMUJFbGNLZ2VEakw0cG1YcS1zWG50ZDJjR09Qb0Zxdk1TaXRaZml6SncycW1DaHJyNEhDYmQyX1k2SVhEQzdVVS1UOVFoZGl3aEFmUGVZZmxVQi1fVFN6UzF3d29PYzl4c1pfaV9NYjl4SWhiWFZISWJjZllzZ2hPa1lkOUV5eXlOU0hGeEI0dWhQR1J1cmxNM0JnYS1pTjFpUmxtOXpLeW5WbnFXNTRVdU9YcUVqWEE2WldNTE0tbmNYdTRQMWdJWXlNVE9pdnRJUW1OZnlLQmlSOWdwek9vbVJkSFhGMWx5dVBVMU5iaVdFT1l4eTNvZFpISlJjODdwSldsQ1g5XzVoOG9JSWxqSFJGR2lITGNRTVVLdzNUc096Ny1Mdmc5R1hCVkRKT2dCUGFTNmt5MnZaOTh0SUxoTXdBVnZMbno4akxvYXpNU1hHVkEyVjZ2aWJCNW9aektzZGMzdHNwVlYtMS1PRUlMRThVWWdHWlFTV2o1N2xRRGlUMzNMVFpwSTJhamtpZHVsSjAwZXpjaTYzamJTUURDTndGak0wZGZQVnpVaFdVcXg0UGpqVGNfMGNYa0RLN1A5dmR3YWNfdjJYSGZCcUJYZXIxS2JrbndYRnctMHFMS28wSG1FT0RxWGgwUk5XNnNSTTJ1ODBQdTQx)"
            xcode: latest
            cocoapods: default
        triggering:
            events:
                - push
            branch_patterns:
                - pattern: master
                  include: true
                  source: true
        scripts:
          - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
            script: keychain initialize
          - name: Fetch signing files
            script: |
                app-store-connect fetch-signing-files "com.ahortacwb.ahorta" --type IOS_APP_DEVELOPMENT --create
          - name: Set up signing certificate
            script: keychain add-certificates
          - name: Set up code signing settings on Xcode project
            script: xcode-project use-profiles
          - name: Build ipa for distribution
            script: xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
        artifacts:
          - build/ios/ipa/*.ipa
          - /tmp/xcodebuild_logs/*.log
          - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
        publishing:
          app_store_connect:
            apple_id: diwoapple@gmail.com  # PUT YOUR APPLE ID HERE
            password: Encrypted(Z0FBQUFBQmdMamdCcW12WWFraW9wUURWXzVPM0Z3cUxGazJfWXRCMjZhOHJtTmFVMWxELUxuWUNZSGNZNFpHSGhIY3kybWtvdHdqWjRPS3hoRk9Rc181YUpTbUU3aHR4MnhUdTNyV2RqTzJGdW9EbmQzQi1fRDA9) # PUT YOUR APP-SPECIFIC-PASSWORD HERE https://support.apple.com/en-us/HT204397
