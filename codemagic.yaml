# # Check out https://docs.codemagic.io/getting-started/building-a-native-ios-app/ for more information
# # Please review and update values in curly braces

workflows:
    ios-app:
        name: iOS App
        environment:
            vars:
                XCODE_WORKSPACE: "ahorta.xcworkspace"  # PUT YOUR WORKSPACE NAME HERE
                XCODE_SCHEME: "ahorta" # PUT THE NAME OF YOUR SCHEME HERE
                APP_STORE_CONNECT_ISSUER_ID: "Encrypted(Z0FBQUFBQmdMWUtmUmxHVVg1VFM4WFdycEw2V1ZlcmhMeG1Yb0FaaE1WZVczRWs2aU9KZU96VU00REZRWTJqV1k4enBHX0RnNDlBTHJ6bkRlV0ZTNGlnUE43X2dibmlmSDNBWnJRSUFGVXNJQWR6TUxsZWlZMElWdElralpwMmIwX0hhYjQwU3lwRjg=)"
                APP_STORE_CONNECT_KEY_IDENTIFIER: "Encrypted(Z0FBQUFBQmdMWU1rSEZ3cjBXLTROYjRqWmVRNmR2ZW84eW52RlhyMWJFelM5bTNmai00TnhFcFVoSm9kbng2U1hNalhwV3JEcEdaZEZGZ0haeVFlUzRrNW5wUHF1MzZDY0E9PQ==)"
                APP_STORE_CONNECT_PRIVATE_KEY: "Encrypted(Z0FBQUFBQmdMb1JFU3J4cUp3T1BFVkYwUWo5VHRmcVN1c1JUUjhCbmFMbkdUZXlfZXB3czR1Q3FVRHMyUHlsQXI3VjVWUkU0SkJMZkh3X3AyMjdHMURYT2M5RHV6TkY3S21wX3JxMmFwc2tfMnYzdElYOXhCbk1zaVJGX2NVNG1aSFNKUmROYVhkTTZjN0lFbVhkNVkyTlVCNERnS2ZPYnVGc1Eya3dQb0ZuWlk0LV9hU2o1LUljVXNnNklDelJvQkpKZ1laVXl5WWZvbjFiVE1CMmRoN3JIeHQzSGpmOW9yV3VRV0c3c2FYeF9NRjE5UmtvbjR2eTlwUktvWDFjdkdtNHZTREptOGlKSmF1bDFMNThoaFhOMXFnN3dzWTYya1R3UF9rM2JodFYxaGpIWjl3ZjNDaFRCUmhkSzVlMFpvLWtISkRlVWFvSHRQX1c1bWFJaHVoMWRZMFNTUVl0OGl6OWhYNXc4Wm1YQWJWZTFqRFIzSWdJUHl6M1lHZ3dFU3hHWHJBU1BZSVhCejlTVXBqdUdEd3ZnVEdwXzhiZXBFZjRqY09lazFmdjhEWnQ2bkstNjhuelphQVgtZnJVN3dwdHlJb3dhbGVVZC1fTm16c3Frck5SQ1VYWkFsWTVCYjFkQ2k1V2tiOEpBYktIUGV6c1diWm0ySjhQdi1rWDNGc2I1Q0RBaE90eGxyNVFJMi1MSUpDRHRhbnpBYm9INS1BPT0=)"
                CERTIFICATE_PRIVATE_KEY: "Encrypted(Z0FBQUFBQmdMb1U3dXNmQ01ianQtR0lBbENoVTUxQVJqR25QVk9fR3VxWlJzS3FFSkVrQXc2UnBTVlNtTS00b3RCQTJSbWN2TDdqZlRRUzNTOVVxMWdZSjJ1QkhaYlZlTXdGb0JBTWdPTjJfM1lvdENUVnVVYlcxRE5rM3VuVG9KLVd6UFBiRl9GSTh4bWZ4Z0M3NlFmbHNPTnY5VDhrdHVmVXBocWhEWXVqM2E3bDI4SmtoMEs3YmpXWW9xRHBuUUhJN0xDaXNuM2luTnk4NWF5aVpKZ2hKZmtQZ1dKeGNFUXJvcU5lVVktV3pJRklLQURGWXJyYU83M0R0UTE1ZXFBOTZDano0a3B2bUZFYVJEdGxqQkZPTGNfQ2lKZlpkbGNsYU4xNDVMbE1KOG9wRnRHYVdfcVNVUzY1YXRlbmYwZkxZUllFNXFPX0o5Z2ViMXROOEMwalhheVhHTGhRV3JsVFNrc1ZQYjB5cVE1STgtd3RIcTFBRnE4WlNhV0d2YjBMcFluQy1WNHA2eVl6MU94eVU3Umw4WWVtXzB2Y2w2czdPUFpTM0JsVE5rSUVMNkRGTlJMeHNBZHMxX19KODNCWVBPd0lMX2ZLRnR5UFMyYUFrRHdqdDRVNWtZWlFyem4xS3pBbk1MVVRRNUE3cTRoZlFTeW1iSlhXNG1wTlk0RGVWQlIwd2d2RmdrMDNqWTlxcFhPUzhMQjhMOFFoVUtxVnU0VTJaWURGYWlDbUhKMkhyd1RGdElYR3FoMFNveFVSYTVZdzZNSkJQbGtKZTNfQmF1NndteTd5SWVsZlA4QVZsNjFXbFlYVFZ4ODBybTNWbzVlOEF3VG53ZE9uV0FlVndBY3R4LVk4R0NNMlA5bE8tbXNDVjFSOGdZVGxXVU9ZczRFSGkxZTlpaFRFcFRVZUJ0NDc0clRmaXZ3QmRDV0NXY3pla3N0Q3JwSkZwektnYUx3Nk5LZEhFVlR5ZEhOWFl4WHlqbmhYZGF3NW9VTmtCd3Q1ZG5FUkEzYXlseTFlMTExeW5hZ0ctZEttUElMZldKOUVDdDVGY0tacmQ2MkhLc2p3TUh4eEJfdXdUdFVZTFh0endJNUNjY2xMdkNrSXdrWVMxRno1Q1ZSQzJUM1dlVXRGZnpUVGV3VFA5X0RPS1RYX29PRVhza2lLbml6VV83bFIxcjBNblBFLTN2ZzM0X3o4TEJFcFNMdktsQm94VWp4b3VYQW5BRXBCbE5xOHpxRW9xYVVxRHRnWmtIUTZZWTk3NElaVnljNmxnMU5seXEzNGFyY2R6V2lLcnp4N3B2dmZSVUIxQW8tWjkwT2Y0aWRkZUtTdXZTdEhZRXd4WkN5MjdaVHk0QzdLM1NyeVRHYTR2VUc2WUZ4SVluT3RtQmxvU19ocjRUblV4OTVaX0tFdGlZMU93ZGhieGpFVllOZjNjREdhY1RTTFE2a1huVko4SWFtZGJXOGFJb3o4QjM0V2dQZDNmMW9zNDQtLUlYRVJ6RFNQY3pYOTZrQU9vWmJEMmpuSjhueVJkbUZ4LUNHRElFMzNXZVV1ZG82NG5wR21waVdncGNNS2IzMXpSRW93MUNKQjhGN0ZubGx2dS1lWXJ3Nzk4S2hHQV9vbHhGcktLTm03c2JzQ0JfcmNmcXNsbVdKYmZnQnlfdE5aUmlaeXZjdjFKWUg1MUQ4cVZLdlZKYUpkN09EWG4xMXo5RFoyQ3J6QmdYS1YxU1RFbGRaVzVWVUJJRWQwTWJ6ZGxtZzZSY3l2WWNQendwWl8tOE93d1Bpa0dRa1JxVUlMaEtkRVdpS25lNGt5Q3NhSFlhRXY0QkphSE16NTIxU3FSRE1yUHdMVmIzbUdHX284ZjFqaUxOZTQ4bFBpaVdaQ25sZENHaXIxdFZBX0pLU2lBbjdqSWl4NUVacFBaLVoyU3JSNGdHdXZtRXZ1U1p6YmE5VmRXbklWSlE2S2JrbXV6TExCdjZMTW5pR045ekhPbXg0VVV5N1V6OWlTTV9WeDA1T0k1M3JpV3djOGxKMTJMeHJ2V2NZZldrN1AycFN3cFRhWW5aV19PWWY1OEtob1VDTnhDREdtOGVtZ2QtaFYwWEdFMU1MU1laU2xTYm1PNWJYenJyOE9DbXpZcW9vMzdRb2FJR0hMS29HOVlvTy1FenhqVkgtb1ZjMHJ4aG9JYl9BblJ0TENVMTNNMU40MFBmOXhEdnJxNjIySFBlRWZFWGMtbmN0SzhWTmttY2VkcEFJbjF0c01jSDJISGczSEhZR29WbHEtMWRzY09VTnloUjRQY3N2anhZXzhrSUNZQ1J4MnF2Z05mMGhtLTluQnI1b0drRkE4TW5jOTF6T2JkVFhHSEVtcXNzOHlUY1FfRFdTc1FHTTRNX0ZuS2E2bzBLOHdlSy1MYlE3UTdNUmV2WXhNUGtBeHBmd3VkZnVwdGRRYlRMZXIwNWhwcjVuYVlZdlJJYnV6d0Q0clhvTmgwWVBiYmNZclJkYmNPREMyeENtYkFtbXBBekY5NFZzRF8tVDJnaTBLRmZDLWpGcC01UGcwZFR6enNvZ0h5a0pyNGRJV1hYNWl4VEo4VE1GTlRBRTc2dERMa3llYTFOQ0R3Smx3M3dqU1hkVEZzMDYyb1RFRVBkejRSM1ZINDgyd2k1QjNDZlpKSm84eTNDWjJ3c0pLQmZXMEY1ZW8wSU96UHh2Zk5mVlFVRHBudmlMQkdWc0htV2N3cElPQVFtZ3pfcDhJdFdZUk9WOWMzT2prOXV1SFVrQXpXcVJaMGVKTEg0SVhtZnhJcjVTVlhJdjM3MEZudnJNamR4N2NVZnBKakxxWWhaOWZUTGxtSE43Ql8xUXVaYmlhZllDQ2FKTGZ1eVRxMDJUZXBtRGgyb3NJSzB3cXA0bDVFS2Z2dXlwTzJtTTg2Vy1Pd21XMVNPNUJjWm1jV3N2OWJka0V6c2dOTm5zWURia0Q2UHJiNEtoV0xpbEdNU09jVVU3alo3Q0hHbF9iOGFUY0lqcmZHNFpIOE5URjhfY3V1Rm9ic04zUXEtbVFZS0VlT1ZUQTdxalB1WGJnb2hMcmFtRG9wQmpvajMtM29RTHdsaXFRZ0hLMGoyZDNTX3BsNVZGbTB0NTBvRmRiMmNENUhhanNQMTdmMDFLTHpoVWhzc2xXbUhXY2w0WG44SWJKMHRTS3h3b0VmRzExU3VSbjBWSW1HMkhmZjh3bnlDb1pjOHBXZUtBUWpiT2I4QUxsNGluTVJKU2E3bmFPR3JWM2tzOXN1aG1HdTF6ZmQtT0hzR0xMS1VzSUhmUEFYNXpSWFd4Z1VLNlUyWTRsV2Q2elQzV29udjB5Y2o0ck1wcXE3Mlh4a2JPTXhhNU5lcEZVR2VtRzduYkx0VFc1dFF2VmVyU1lrUkhkU25pOWJDVmphWUl4NmJIb1dtb2JjUW1SZzJ4M3pHUDBBdHhyMU9DdG1lalk2X1YwQ2VGR1d2eE52bHNkRVBZOFlEYTBxMFFybXZMS1VMVXdpVEFLQm00VGt2TE94UDN0SlBNMzQ2NHlIRERXOC0wa2xZRFU0dE5zU01aY3RadHpYR1dibnlxNEZUWEZDZkZzcGZJc1N3NVBzeWMxTE5qRGZTOEhqdTBkbmpqN19pR2NzTzFYcmRVcG1pTG5nYVpzRF9DQlYtRjRYUTV5NjNWSW5ZUGtVUkQtQkY1bGhOYThFYXRQZEpFbTZUdGJCaHY1TGNwTmNucVVWdjBsMTcxa3pOS2MzV1B1UXVIcFM0MXZmUHZ1UURGaHZGajE1emdwT1IxUmluVjJhUUZPV0U5dUY4ekJnSHF5bnpIME52YkdoN3N5NFdIbVRQSHJFdUh5REI4Z21Zd2lKOTJnMHV6SGdmcVh0cTBiUExZZWRkMXFmZWhzcjI0YjhBdGpDNmFuSVdZckx0T3ZReUcwSWdkT0RWakFOVVpEczhwMUpyQm5wMnduOUVmeUNfNlFHRU1oWWVzaHkwTlI3NS1ld0lBVmFIN1d6UTNOX0w1dW5RTm0tbEw0ckpuZnJrMzZpemN6R3luNXJZYnJRdEhqNmNKRjQ5TFdxdEU2WXNvRDVlVDlLQkE4PQ==)"
            xcode: latest
            cocoapods: default
        triggering:
            events:
                - push
            branch_patterns:
                - pattern: master
                  include: true
                  source: true
        scripts:
          - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
            script: keychain initialize
          - name: Fetch signing files
            script: |
                app-store-connect fetch-signing-files "com.ahortacwb.ahorta" --type IOS_APP_DEVELOPMENT --create
          - name: Set up signing certificate
            script: keychain add-certificates
          - name: Set up code signing settings on Xcode project
            script: xcode-project use-profiles
          - name: Build ipa for distribution
            script: xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
        artifacts:
          - build/ios/ipa/*.ipa
          - /tmp/xcodebuild_logs/*.log
          - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
        publishing:
          app_store_connect:
            apple_id: diwoapple@gmail.com  # PUT YOUR APPLE ID HERE
            password: Encrypted(Z0FBQUFBQmdMamdCcW12WWFraW9wUURWXzVPM0Z3cUxGazJfWXRCMjZhOHJtTmFVMWxELUxuWUNZSGNZNFpHSGhIY3kybWtvdHdqWjRPS3hoRk9Rc181YUpTbUU3aHR4MnhUdTNyV2RqTzJGdW9EbmQzQi1fRDA9) # PUT YOUR APP-SPECIFIC-PASSWORD HERE https://support.apple.com/en-us/HT204397
